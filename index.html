<!doctype html>
<html lang="en">
<head>
    
    <!-- <meta charset="utf-8"> -->
    <!-- <link rel='stylesheet' href='../style.css'  type="text/css" > -->

    <title>Encryption Page</title>

    <script src="./js/js/jquery-3.6.0.min.js"></script>
    <script src="./js/jquery-ui-1.13.0/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="./js/jquery-ui-1.13.0/jquery-ui.css">
    <script src="./build/notes.js"></script>
    <script>
        
        $( document ).ready(function() {
            var data = new FormData();
            data.append('listings','files list');
            
            $('#button1').click(function() {

               let inputVal = document.getElementsByClassName("inputClass2")[0].value;
              let text_key = document.getElementsByClassName("inputClass1")[0].value;
              var input_t = Array.from(inputVal);
              var outstr = new Array((inputVal.length+13)*"");
              var outstr_dec = new Array((inputVal.length)*"");
              Module.cmd_enc(input_t,inputVal.length,outstr,text_key);
              Module.cmd_enc(outstr,inputVal.length+12,outstr_dec,text_key);
              $("#output1").append(outstr_dec.toString());
            });


        });
        var Module = {
          onRuntimeInitialized: function() {
            Module.main();
            var vec = new Module.CharList("this is not a secret, but.");



            let inputVal = "this is not a secret, but.";
            let text_key = "1234";
            for (let character of inputVal) {
              vec.push_back(character);
            }
            var enc = new Module.Cc20();

            Module.use_vector_string(vec);


            var input_t = Array.from(inputVal);
            var outstr = new Array((inputVal.length+13)*"");
            var outstr_dec = new Array((inputVal.length)*"");
            enc.cmd_enc(input_t,inputVal.length,outstr,text_key);
            enc.cmd_enc(outstr,inputVal.length+12,outstr_dec,text_key);
            $("#output1").append(Module.loader_check());
            enc.delete();
            vec.delete();
          }
        };



    </script>
   

</head>
<body>
<!--    <button>HTTP POST request </button>-->
    <h2>
    Encryption
    </h2>
    <input type="text" placeholder="password " id="input1" class="inputClass1">
    <input type="text" placeholder="Type " id="input2" class="inputClass2">
    <button type="button" id="button1" >Get Value</button>
    <p id=output1></p>

</body>
    
<footer>
  <a href="https://github.com/2042third" target="_blank">Source</a>
  <br><br>
  <span id="version"></span><br>
  Copyright (c) 2021 Yang Yi<br>
  <a href="https://dryangyi.com" target="_blank">dryangyi.com</a>
</footer>
</html>